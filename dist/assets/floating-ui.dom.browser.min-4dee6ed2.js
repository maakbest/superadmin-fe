function W(t){return t.split("-")[1]}function ft(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function Q(t){return["top","bottom"].includes(B(t))?"x":"y"}function ht(t,e,o){let{reference:n,floating:r}=t;const i=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2,s=Q(e),a=ft(s),c=n[a]/2-r[a]/2,g=s==="x";let f;switch(B(e)){case"top":f={x:i,y:n.y-r.height};break;case"bottom":f={x:i,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:l};break;case"left":f={x:n.x-r.width,y:l};break;default:f={x:n.x,y:n.y}}switch(W(e)){case"start":f[s]-=c*(o&&g?-1:1);break;case"end":f[s]+=c*(o&&g?-1:1)}return f}const Wt=async(t,e,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:l}=o,s=i.filter(Boolean),a=await(l.isRTL==null?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:g,y:f}=ht(c,n,a),p=n,d={},m=0;for(let u=0;u<s.length;u++){const{name:h,fn:w}=s[u],{x:y,y:R,data:A,reset:L}=await w({x:g,y:f,initialPlacement:n,placement:p,strategy:r,middlewareData:d,rects:c,platform:l,elements:{reference:t,floating:e}});g=y??g,f=R??f,d={...d,[h]:{...d[h],...A}},L&&m<=50&&(m++,typeof L=="object"&&(L.placement&&(p=L.placement),L.rects&&(c=L.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):L.rects),{x:g,y:f}=ht(c,p,a)),u=-1)}return{x:g,y:f,placement:p,strategy:r,middlewareData:d}};function _(t,e){return typeof t=="function"?t(e):t}function Tt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function tt(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function J(t,e){var o;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:l,elements:s,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:g="viewport",elementContext:f="floating",altBoundary:p=!1,padding:d=0}=_(e,t),m=Tt(d),u=s[p?f==="floating"?"reference":"floating":f],h=tt(await i.getClippingRect({element:(o=await(i.isElement==null?void 0:i.isElement(u)))==null||o?u:u.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:g,strategy:a})),w=f==="floating"?{...l.floating,x:n,y:r}:l.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),R=await(i.isElement==null?void 0:i.isElement(y))&&await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1},A=tt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:y,strategy:a}):w);return{top:(h.top-A.top+m.top)/R.y,bottom:(A.bottom-h.bottom+m.bottom)/R.y,left:(h.left-A.left+m.left)/R.x,right:(A.right-h.right+m.right)/R.x}}const lt=Math.min,Bt=Math.max;function ct(t,e,o){return Bt(t,lt(e,o))}const Yt=t=>({name:"arrow",options:t,async fn(e){const{x:o,y:n,placement:r,rects:i,platform:l,elements:s}=e,{element:a,padding:c=0}=_(t,e)||{};if(a==null)return{};const g=Tt(c),f={x:o,y:n},p=Q(r),d=ft(p),m=await l.getDimensions(a),u=p==="y",h=u?"top":"left",w=u?"bottom":"right",y=u?"clientHeight":"clientWidth",R=i.reference[d]+i.reference[p]-f[p]-i.floating[d],A=f[p]-i.reference[p],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(a));let E=L?L[y]:0;E&&await(l.isElement==null?void 0:l.isElement(L))||(E=s.floating[y]||i.floating[d]);const $=R/2-A/2,C=E/2-m[d]/2-1,k=lt(g[h],C),b=lt(g[w],C),v=k,T=E-m[d]-b,x=E/2-m[d]/2+$,O=ct(v,x,T),D=W(r)!=null&&x!=O&&i.reference[d]/2-(x<v?k:b)-m[d]/2<0?x<v?v-x:T-x:0;return{[p]:f[p]-D,data:{[p]:O,centerOffset:x-O+D}}}}),Et=["top","right","bottom","left"],gt=Et.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),Mt={left:"right",right:"left",bottom:"top",top:"bottom"};function et(t){return t.replace(/left|right|bottom|top/g,e=>Mt[e])}function At(t,e,o){o===void 0&&(o=!1);const n=W(t),r=Q(t),i=ft(r);let l=r==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=et(l)),{main:l,cross:et(l)}}const Vt={start:"end",end:"start"};function Z(t){return t.replace(/start|end/g,e=>Vt[e])}const _t=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var o,n,r;const{rects:i,middlewareData:l,placement:s,platform:a,elements:c}=e,{crossAxis:g=!1,alignment:f,allowedPlacements:p=gt,autoAlignment:d=!0,...m}=_(t,e),u=f!==void 0||p===gt?function(b,v,T){return(b?[...T.filter(x=>W(x)===b),...T.filter(x=>W(x)!==b)]:T.filter(x=>B(x)===x)).filter(x=>!b||W(x)===b||!!v&&Z(x)!==x)}(f||null,d,p):p,h=await J(e,m),w=((o=l.autoPlacement)==null?void 0:o.index)||0,y=u[w];if(y==null)return{};const{main:R,cross:A}=At(y,i,await(a.isRTL==null?void 0:a.isRTL(c.floating)));if(s!==y)return{reset:{placement:u[0]}};const L=[h[B(y)],h[R],h[A]],E=[...((n=l.autoPlacement)==null?void 0:n.overflows)||[],{placement:y,overflows:L}],$=u[w+1];if($)return{data:{index:w+1,overflows:E},reset:{placement:$}};const C=E.map(b=>{const v=W(b.placement);return[b.placement,v&&g?b.overflows.slice(0,2).reduce((T,x)=>T+x,0):b.overflows[0],b.overflows]}).sort((b,v)=>b[1]-v[1]),k=((r=C.filter(b=>b[2].slice(0,W(b[0])?2:3).every(v=>v<=0))[0])==null?void 0:r[0])||C[0][0];return k!==s?{data:{index:w+1,overflows:E},reset:{placement:k}}:{}}}},jt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;const{placement:n,middlewareData:r,rects:i,initialPlacement:l,platform:s,elements:a}=e,{mainAxis:c=!0,crossAxis:g=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:m=!0,...u}=_(t,e),h=B(n),w=B(l)===l,y=await(s.isRTL==null?void 0:s.isRTL(a.floating)),R=f||(w||!m?[et(l)]:function(v){const T=et(v);return[Z(v),T,Z(T)]}(l));f||d==="none"||R.push(...function(v,T,x,O){const D=W(v);let P=function(N,I,kt){const mt=["left","right"],pt=["right","left"],Ft=["top","bottom"],Ht=["bottom","top"];switch(N){case"top":case"bottom":return kt?I?pt:mt:I?mt:pt;case"left":case"right":return I?Ft:Ht;default:return[]}}(B(v),x==="start",O);return D&&(P=P.map(N=>N+"-"+D),T&&(P=P.concat(P.map(Z)))),P}(l,m,d,y));const A=[l,...R],L=await J(e,u),E=[];let $=((o=r.flip)==null?void 0:o.overflows)||[];if(c&&E.push(L[h]),g){const{main:v,cross:T}=At(n,i,y);E.push(L[v],L[T])}if($=[...$,{placement:n,overflows:E}],!E.every(v=>v<=0)){var C,k;const v=(((C=r.flip)==null?void 0:C.index)||0)+1,T=A[v];if(T)return{data:{index:v,overflows:$},reset:{placement:T}};let x=(k=$.filter(O=>O.overflows[0]<=0).sort((O,D)=>O.overflows[1]-D.overflows[1])[0])==null?void 0:k.placement;if(!x)switch(p){case"bestFit":{var b;const O=(b=$.map(D=>[D.placement,D.overflows.filter(P=>P>0).reduce((P,N)=>P+N,0)]).sort((D,P)=>D[1]-P[1])[0])==null?void 0:b[0];O&&(x=O);break}case"initialPlacement":x=l}if(n!==x)return{reset:{placement:x}}}return{}}}};function yt(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xt(t){return Et.some(e=>t[e]>=0)}const qt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:o}=e,{strategy:n="referenceHidden",...r}=_(t,e);switch(n){case"referenceHidden":{const i=yt(await J(e,{...r,elementContext:"reference"}),o.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:xt(i)}}}case"escaped":{const i=yt(await J(e,{...r,altBoundary:!0}),o.floating);return{data:{escapedOffsets:i,escaped:xt(i)}}}default:return{}}}}},Gt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:o,y:n}=e,r=await async function(i,l){const{placement:s,platform:a,elements:c}=i,g=await(a.isRTL==null?void 0:a.isRTL(c.floating)),f=B(s),p=W(s),d=Q(s)==="x",m=["left","top"].includes(f)?-1:1,u=g&&d?-1:1,h=_(l,i);let{mainAxis:w,crossAxis:y,alignmentAxis:R}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return p&&typeof R=="number"&&(y=p==="end"?-1*R:R),d?{x:y*u,y:w*m}:{x:w*m,y:y*u}}(e,t);return{x:o+r.x,y:n+r.y,data:r}}}};function zt(t){return t==="x"?"y":"x"}const Jt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:o,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:s={fn:h=>{let{x:w,y}=h;return{x:w,y}}},...a}=_(t,e),c={x:o,y:n},g=await J(e,a),f=Q(B(r)),p=zt(f);let d=c[f],m=c[p];if(i){const h=f==="y"?"bottom":"right";d=ct(d+g[f==="y"?"top":"left"],d,d-g[h])}if(l){const h=p==="y"?"bottom":"right";m=ct(m+g[p==="y"?"top":"left"],m,m-g[h])}const u=s.fn({...e,[f]:d,[p]:m});return{...u,data:{x:u.x-o,y:u.y-n}}}}};function S(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function F(t){return S(t).getComputedStyle(t)}function $t(t){return t instanceof S(t).Node}function z(t){return $t(t)?(t.nodeName||"").toLowerCase():"#document"}function H(t){return t instanceof S(t).HTMLElement}function M(t){return t instanceof S(t).Element}function wt(t){return typeof ShadowRoot<"u"&&(t instanceof S(t).ShadowRoot||t instanceof ShadowRoot)}function K(t){const{overflow:e,overflowX:o,overflowY:n,display:r}=F(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(r)}function Nt(t){return["table","td","th"].includes(z(t))}function st(t){const e=ut(),o=F(t);return o.transform!=="none"||o.perspective!=="none"||!e&&!!o.backdropFilter&&o.backdropFilter!=="none"||!e&&!!o.filter&&o.filter!=="none"||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function ut(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function it(t){return["html","body","#document"].includes(z(t))}const at=Math.min,j=Math.max,nt=Math.round,U=Math.floor,X=t=>({x:t,y:t});function Pt(t){const e=F(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=H(t),i=r?t.offsetWidth:o,l=r?t.offsetHeight:n,s=nt(o)!==i||nt(n)!==l;return s&&(o=i,n=l),{width:o,height:n,$:s}}function dt(t){return M(t)?t:t.contextElement}function q(t){const e=dt(t);if(!H(e))return X(1);const o=e.getBoundingClientRect(),{width:n,height:r,$:i}=Pt(e);let l=(i?nt(o.width):o.width)/n,s=(i?nt(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}const vt=X(0);function Ot(t,e,o){var n,r;if(e===void 0&&(e=!0),!ut())return vt;const i=t?S(t):window;return!o||e&&o!==i?vt:{x:((n=i.visualViewport)==null?void 0:n.offsetLeft)||0,y:((r=i.visualViewport)==null?void 0:r.offsetTop)||0}}function Y(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);const r=t.getBoundingClientRect(),i=dt(t);let l=X(1);e&&(n?M(n)&&(l=q(n)):l=q(t));const s=Ot(i,o,n);let a=(r.left+s.x)/l.x,c=(r.top+s.y)/l.y,g=r.width/l.x,f=r.height/l.y;if(i){const p=S(i),d=n&&M(n)?S(n):n;let m=p.frameElement;for(;m&&n&&d!==p;){const u=q(m),h=m.getBoundingClientRect(),w=getComputedStyle(m),y=h.left+(m.clientLeft+parseFloat(w.paddingLeft))*u.x,R=h.top+(m.clientTop+parseFloat(w.paddingTop))*u.y;a*=u.x,c*=u.y,g*=u.x,f*=u.y,a+=y,c+=R,m=S(m).frameElement}}return tt({width:g,height:f,x:a,y:c})}function V(t){return(($t(t)?t.ownerDocument:t.document)||window.document).documentElement}function rt(t){return M(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Dt(t){return Y(V(t)).left+rt(t).scrollLeft}function G(t){if(z(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wt(t)&&t.host||V(t);return wt(e)?e.host:e}function St(t){const e=G(t);return it(e)?t.ownerDocument?t.ownerDocument.body:t.body:H(e)&&K(e)?e:St(e)}function ot(t,e){var o;e===void 0&&(e=[]);const n=St(t),r=n===((o=t.ownerDocument)==null?void 0:o.body),i=S(n);return r?e.concat(i,i.visualViewport||[],K(n)?n:[]):e.concat(n,ot(n))}function bt(t,e,o){let n;if(e==="viewport")n=function(r,i){const l=S(r),s=V(r),a=l.visualViewport;let c=s.clientWidth,g=s.clientHeight,f=0,p=0;if(a){c=a.width,g=a.height;const d=ut();(!d||d&&i==="fixed")&&(f=a.offsetLeft,p=a.offsetTop)}return{width:c,height:g,x:f,y:p}}(t,o);else if(e==="document")n=function(r){const i=V(r),l=rt(r),s=r.ownerDocument.body,a=j(i.scrollWidth,i.clientWidth,s.scrollWidth,s.clientWidth),c=j(i.scrollHeight,i.clientHeight,s.scrollHeight,s.clientHeight);let g=-l.scrollLeft+Dt(r);const f=-l.scrollTop;return F(s).direction==="rtl"&&(g+=j(i.clientWidth,s.clientWidth)-a),{width:a,height:c,x:g,y:f}}(V(t));else if(M(e))n=function(r,i){const l=Y(r,!0,i==="fixed"),s=l.top+r.clientTop,a=l.left+r.clientLeft,c=H(r)?q(r):X(1);return{width:r.clientWidth*c.x,height:r.clientHeight*c.y,x:a*c.x,y:s*c.y}}(e,o);else{const r=Ot(t);n={...e,x:e.x-r.x,y:e.y-r.y}}return tt(n)}function Ct(t,e){const o=G(t);return!(o===e||!M(o)||it(o))&&(F(o).position==="fixed"||Ct(o,e))}function Rt(t,e){return H(t)&&F(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Lt(t,e){const o=S(t);if(!H(t))return o;let n=Rt(t,e);for(;n&&Nt(n)&&F(n).position==="static";)n=Rt(n,e);return n&&(z(n)==="html"||z(n)==="body"&&F(n).position==="static"&&!st(n))?o:n||function(r){let i=G(r);for(;H(i)&&!it(i);){if(st(i))return i;i=G(i)}return null}(t)||o}function It(t,e,o){const n=H(e),r=V(e),i=o==="fixed",l=Y(t,!0,i,e);let s={scrollLeft:0,scrollTop:0};const a=X(0);if(n||!n&&!i)if((z(e)!=="body"||K(r))&&(s=rt(e)),H(e)){const c=Y(e,!0,i,e);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else r&&(a.x=Dt(r));return{x:l.left+s.scrollLeft-a.x,y:l.top+s.scrollTop-a.y,width:l.width,height:l.height}}const Xt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:r}=t;const i=o==="clippingAncestors"?function(c,g){const f=g.get(c);if(f)return f;let p=ot(c).filter(h=>M(h)&&z(h)!=="body"),d=null;const m=F(c).position==="fixed";let u=m?G(c):c;for(;M(u)&&!it(u);){const h=F(u),w=st(u);w||h.position!=="fixed"||(d=null),(m?!w&&!d:!w&&h.position==="static"&&d&&["absolute","fixed"].includes(d.position)||K(u)&&!w&&Ct(c,u))?p=p.filter(y=>y!==u):d=h,u=G(u)}return g.set(c,p),p}(e,this._c):[].concat(o),l=[...i,n],s=l[0],a=l.reduce((c,g)=>{const f=bt(e,g,r);return c.top=j(f.top,c.top),c.right=at(f.right,c.right),c.bottom=at(f.bottom,c.bottom),c.left=j(f.left,c.left),c},bt(e,s,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const r=H(o),i=V(o);if(o===i)return e;let l={scrollLeft:0,scrollTop:0},s=X(1);const a=X(0);if((r||!r&&n!=="fixed")&&((z(o)!=="body"||K(i))&&(l=rt(o)),H(o))){const c=Y(o);s=q(o),a.x=c.x+o.clientLeft,a.y=c.y+o.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-l.scrollLeft*s.x+a.x,y:e.y*s.y-l.scrollTop*s.y+a.y}},isElement:M,getDimensions:function(t){return Pt(t)},getOffsetParent:Lt,getDocumentElement:V,getScale:q,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t;const r=this.getOffsetParent||Lt,i=this.getDimensions;return{reference:It(e,await r(o),n),floating:{x:0,y:0,...await i(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>F(t).direction==="rtl"};function Kt(t,e,o,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=!0,layoutShift:s=typeof IntersectionObserver=="function",animationFrame:a=!1}=n,c=dt(t),g=r||i?[...c?ot(c):[],...ot(e)]:[];g.forEach(u=>{r&&u.addEventListener("scroll",o,{passive:!0}),i&&u.addEventListener("resize",o)});const f=c&&s?function(u,h){let w,y=null;const R=V(u);function A(){clearTimeout(w),y&&y.disconnect(),y=null}return function L(E,$){E===void 0&&(E=!1),$===void 0&&($=1),A();const{left:C,top:k,width:b,height:v}=u.getBoundingClientRect();if(E||h(),!b||!v)return;const T=U(k),x=U(R.clientWidth-(C+b)),O=U(R.clientHeight-(k+v)),D=U(C);let P=!0;y=new IntersectionObserver(N=>{const I=N[0].intersectionRatio;if(I!==$){if(!P)return L();I?L(!1,I):w=setTimeout(()=>{L(!1,1e-7)},100)}P=!1},{rootMargin:-T+"px "+-x+"px "+-O+"px "+-D+"px",threshold:j(0,at(1,$))||1}),y.observe(u)}(!0),A}(c,o):null;let p,d=null;l&&(d=new ResizeObserver(o),c&&!a&&d.observe(c),d.observe(e));let m=a?Y(t):null;return a&&function u(){const h=Y(t);!m||h.x===m.x&&h.y===m.y&&h.width===m.width&&h.height===m.height||o(),m=h,p=requestAnimationFrame(u)}(),o(),()=>{g.forEach(u=>{r&&u.removeEventListener("scroll",o),i&&u.removeEventListener("resize",o)}),f&&f(),d&&d.disconnect(),d=null,a&&cancelAnimationFrame(p)}}const Qt=(t,e,o)=>{const n=new Map,r={platform:Xt,...o},i={...r.platform,_c:n};return Wt(t,e,{...r,platform:i})};export{jt as A,Kt as B,qt as E,Gt as L,Qt as N,Jt as O,_t as b,Yt as g};
